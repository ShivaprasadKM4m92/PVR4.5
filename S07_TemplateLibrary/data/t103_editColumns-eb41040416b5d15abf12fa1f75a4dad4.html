//# sourceMappingURL=editColumns.js.map
var SORT_ASCENDING="asc",SORT_DESCENDING="desc",SORT_DISABLED="disabled",newColumnList=[],newGroupingList=[],newRowColList=[],newRowList=[],numOfReassessListedness=0,undoTagList=[],removeLastTag=0,columnSetList=[],sequence_col_dt=[];
function getTemplateReportFieldOptions(g){var q="",q=q+$("<option>",{value:""}).text($.i18n._("dataTabulation.select.field"))[0].outerHTML;$.each(g,function(g,x){var y=$("<optgroup>",{label:x.group});$.each(x.children,function(g,n){y.append($("<option>",{argusName:n.argusName,reportFieldName:n.reportFieldName,description:encodeToHTML(n.description),legend:n.legend,customExpression:encodeToHTML(n.customExpression),customFieldId:n.customFieldId,fromBlindedList:n.fromBlindedList,clobType:n.clobType,
fieldLabelJ:encodeToHTML(n.fieldLabelJ),fieldLabelE:encodeToHTML(n.fieldLabelE),value:n.value}).text(encodeToHTML(n.displayText)))});q+=y[0].outerHTML});return q}
$(document).ready(function(){function g(a,b,c,d){if("CASE_LINE"===a)$.ajax({type:"GET",url:b,cache:!!c,data:{sourceId:d?d:"",selectionType:N.CLL},error:function(a){console.log(a)},success:function(a){a&&a.data&&(a=getTemplateReportFieldOptions(a.data),$("#cLLReportFieldDropDown select").html(a),q())},beforeSend:function(){showLoaderMultiple()},complete:function(){hiderLoaderMultiple()}});else if("DATA_TAB"===a){var e=$.ajax({type:"GET",url:b,cache:!!c,data:{sourceId:d?d:"",selectionType:N.DT_ROW},
beforeSend:function(){showLoaderMultiple()},complete:function(){hiderLoaderMultiple()}}),f=$.ajax({type:"GET",url:b,cache:!!c,data:{sourceId:d?d:"",selectionType:N.DT_COLUMN},beforeSend:function(){showLoaderMultiple()},complete:function(){hiderLoaderMultiple()}});$.when(e,f).done(function(){200===e.status&&200===f.status?(e.responseJSON&&e.responseJSON.data&&$("#dTTReportFieldDropDown #dtRowSelect2 select").html(getTemplateReportFieldOptions(e.responseJSON.data)),f.responseJSON&&f.responseJSON.data&&
$("#dTTReportFieldDropDown #dtColumnSelect2 select").html(getTemplateReportFieldOptions(f.responseJSON.data)),ja()):(console.log(e),console.log(f))}).fail(function(){console.log(e);console.log(f)})}}function q(){getSelect2TreeView($("#selectField_lineListing")).off().on("change",function(a){if("Select Field"==a.added.text)$("#selectField_lineListing").parent().addClass("has-error");else{$("#selectField_lineListing").parent().removeClass("has-error");var b=$($(".selectedContainerBorder")[0]).find(".containerToBeSelected")[0],
c=y(this,b),d=[a.added,b];W(a.added.element[0].attributes.reportFieldName.value,c)||(a.added.argusName=a.added.element[0].attributes.argusName.value,a.added.reportFieldName=a.added.element[0].attributes.reportFieldName.value,a.added.description=a.added.element[0].attributes.description.value,a.added.fromBlindedList="true"==a.added.element[0].attributes.fromBlindedList.value,a.added.legend=a.added.element[0].attributes.legend.value,a.added.customExpression=a.added.element[0].attributes.customExpression.value,
a.added.customFieldId=a.added.element[0].attributes.customFieldId.value,a.added.clobType=a.added.element[0].attributes.clobType.value,a.added.fieldLabelJ=a.added.element[0].attributes.fieldLabelJ.value,a.added.fieldLabelE=a.added.element[0].attributes.fieldLabelE.value,undoTagList.push(d),0<undoTagList.length&&$("#resetTagId").show(),$(b).hasClass("groupingContainer")?O(a.added,b):$(b).hasClass("rowColumnsContainer")?X(a.added,b):C(a.added,b))}}).on("select2-open",function(){$("#selectField_lineListing").select2("val",
"Select Field");$(document).on("keyup keydown",function(a){r=a.shiftKey})}).on("select2-close",function(a){r&&$("#selectField_lineListing").select2("open")})}function ja(){getSelect2TreeView($("#selectField_dataTabulation_column")).off().on("change",function(a){x(a,this,"column")}).on("select2-open",function(){$("#selectField_dataTabulation_column").select2("val","Select Field");$(document).on("keyup keydown",function(a){r=a.shiftKey})}).on("select2-close",function(a){r&&$("#selectField_dataTabulation_column").select2("open")});
getSelect2TreeView($("#selectField_dataTabulation_row")).off().on("change",function(a){x(a,this,"row")}).on("select2-open",function(){$("#selectField_dataTabulation_row").select2("val","Select Field");$(document).on("keyup keydown",function(a){r=a.shiftKey})}).on("select2-close",function(a){r&&$("#selectField_dataTabulation_row").select2("open")})}function x(a,b,c){if("Select Field"==a.added.text)$("#selectField_dataTabulation_"+c).parent().addClass("has-error");else{$("#selectField_dataTabulation_"+
c).parent().removeClass("has-error");var d=$($(".selectedContainerBorder")[0]).find(".containerToBeSelected")[0],e=$(d).closest(".columnMeasureSet").attr("sequence");b=y(b,d);W(a.added.element[0].attributes.reportFieldName.value,b)||(a.added.argusName=a.added.element[0].attributes.argusName.value,a.added.reportFieldName=a.added.element[0].attributes.reportFieldName.value,a.added.description=a.added.element[0].attributes.description.value,a.added.fromBlindedList="true"==a.added.element[0].attributes.fromBlindedList.value,
a.added.legend=a.added.element[0].attributes.legend.value,a.added.customExpression=a.added.element[0].attributes.customExpression.value,a.added.customFieldId=a.added.element[0].attributes.customFieldId.value,a.added.fieldLabelJ=a.added.element[0].attributes.fieldLabelJ.value,a.added.fieldLabelE=a.added.element[0].attributes.fieldLabelE.value,"row"==c?$(d).hasClass("groupingContainer")?O(a.added,d):Y(a.added,d):(a.added.clobType=a.added.element[0].attributes.clobType.value,C(a.added,d,e)))}}function y(a,
b){a=$(".rowsAndColumnsContainer");var c=[];$(b).hasClass("columnsContainer")&&"CASE_LINE"==k||c.push(b);$.each(a,function(){$(this).hasClass("selectedContainerBorder")||$(b).hasClass("columnsContainer")&&$(this).hasClass("columnsContainer")||c.push(this)});return c}function W(a,b){var c=!1,d=[];$.each(b,function(){$.each($(this).find(".fieldInfo"),function(){d.push(this)})});$.each(d,function(){this.parentElement.style.border="";$(this).attr("fieldId")==a&&(c=!0,$("#selectField_dataTabulation_"+
P).parent().addClass("has-error"),this.parentElement.style.border="solid 1px red")});return c}function n(a){var b=!0;if(0<a){var c=$("[id^=columnsContainer]").find(".fieldInfo");$.each(c,function(){$(this).attr("stackId")==a&&(b=!1)})}return b}function Z(a){var b=$(".row.columnsContainer").first().clone();b.find(".containerToBeSelected").attr("id","columnsContainer"+a);b.find(".containerToBeSelected").attr("data-setid",a);b.find(".containerToBeSelected").empty();$(".selectedContainerBorder").removeClass("selectedContainerBorder");
b.addClass("selectedContainerBorder");$("#addCLLSet").before($("<i id='removeCLLSet"+a+"' class='fa fa-times removeCLLSet' data-setid='"+a+"'></i>"));$("#addCLLSet").before(b)}function C(a,b,c){var d=D;-1<c&&(d=sequence_col_dt[c]?sequence_col_dt[c]:0);a.type="column";a.sequence=d;"DATA_TAB"==k&&(a.colMeasIndex=$(b).closest(".columnMeasureSet").attr("sequence"));"CASE_LINE"==k&&(a.setId=parseInt($(b).closest(".columnsContainer").attr("data-setid")));var e=document.getElementById("toAddColumn"),f=!n(a.stackId),
u=E(e,f),e=u[0],u=u[1];F(a,u,d);G(e,u,a,!1);"DATA_TAB"===k?Q(u):(d=D,0<a.stackId&&(R.hasOwnProperty(a.stackId)||(R[a.stackId]=[],m<=a.stackId&&(m=a.stackId+1)),R[a.stackId].push(d)));f?(b=$("[stackId="+a.stackId+"]").length-1,b=$("[stackId="+a.stackId+"]")[b],b.parentElement.insertBefore(e,b.nextSibling)):"DATA_TAB"===k?aa(e,b):ba(e,b);ka(e);-1<c?(sequence_col_dt[c]?sequence_col_dt[c]++:sequence_col_dt[c]=1,columnSetList[c].push(a)):(D++,newColumnList.push(a));$('[data-toggle="popover"]').popover()}
function O(a,b){a.type="group";a.sequence=H;var c=document.getElementById("toAddColumn"),d=E(c,!1),c=d[0],d=d[1];F(a,d,H);G(c,d,a,!1);Q(d);ba(c,b);S(c);H++;newGroupingList.push(a);$('[data-toggle="popover"]').popover()}function X(a,b){a.type="rowCol";a.sequence=I;var c=document.getElementById("toAddColumn"),d=E(c,!1),c=d[0],d=d[1];F(a,d,I);G(c,d,a,!0);Q(d);aa(c,b);S(c);I++;newRowColList.push(a);$('[data-toggle="popover"]').popover()}function Y(a,b){a.type="row";a.sequence=J;var c=document.getElementById("toAddRow"),
d=E(c,!1),c=d[0],d=d[1];F(a,d,J);G(c,d,a,!0);b.insertBefore(c,b.firstChild);var d=$(b).width(),e=la(b);e>d&&(d+=e-d+5,$(b).width(d));S(c);J++;newRowList.push(a);$('[data-toggle="popover"]').popover()}function E(a,b){var c=a.cloneNode(!0),d=$(c).find(".fieldInfo")[0];b&&(d=c=$(a).find(".fieldInfo")[0].cloneNode(!0));$(c).removeAttr("id");return[c,d]}function F(a,b,c){var d=a.text;if("Re-assess Listedness"===d||"\u65e2\u77e5/\u672a\u77e5\u518d\u8a55\u4fa1"===d||"\u65e2\u77e5/\u672a\u77e5\u518d\u8a55\u4fa1 (E)"===
d||"Re-assess Listedness (J)"===d)numOfReassessListedness++,$(".reassessListedness").show();$(b).attr("sequence",c);$(b).attr("fieldId",a.reportFieldName);$(b).attr("fieldName",decodeFromHTML(a.text));$(b).attr("argusName",a.argusName);$(b).attr("stackId",a.stackId);$(b).attr("clobType",a.clobType);$(b).attr("description",decodeFromHTML(a.description));$(b).attr("legend",a.legend);$(b).attr("fieldLabelJ",decodeFromHTML(a.fieldLabelJ));$(b).attr("fieldLabelE",decodeFromHTML(a.fieldLabelE));a.renameValue&&
a.renameValue!=a.text&&$(b).attr("renamedTo",a.renameValue);a.newLegendValue&&a.newLegendValue!=a.legend&&$(b).attr("renamedLegendTo",a.newLegendValue);$(b).attr("columnWidth",a.columnWidth)}function Q(a){$.each($(a.parentElement.parentElement).find(".emptyColumnContent"),function(){$(this).hide()})}function K(a,b,c){c=c||a;var d=$(b).attr("description");d?$(b).append('<div class="columnName"><i data-toggle="popover" data-trigger="hover"  data-container="body" data-content="'+replaceBracketsAndQuotes(d)+
'"><span class="fa fa-info-circle" style="font-size: 16px; cursor: pointer"></span></i> '+encodeToHTML(c)+"</div>"):$(b).append('<div class="columnName"><i data-toggle="popover" data-trigger="hover"  data-container="body" data-content="'+replaceBracketsAndQuotes(a)+'"><span class="fa fa-info-circle" style="font-size: 16px; cursor: pointer"></span></i> '+encodeToHTML(c)+"</div>")}function G(a,b,c,d,e){viewOnly?(a=$(a).find(".middleColumn")[0],$(a).removeAttr("draggable"),$(b).append('<div class="sortOrderSeq"></div>')):
d?$(b).append('<i class="fa fa-times removeColumn"></i>'):$(b).append('<i class="fa fa-times removeColumn"></i><div class="sortOrderSeq"></div>');a=$(b).attr("fieldName");e=$(b).attr("fieldLabelJ");var f=$(b).attr("fieldLabelE");$(b).attr("renamedTo")?$(b).attr("renamedTo")!=a&&(a=$(b).attr("renamedTo"),K(a,b)):-1<a.indexOf("(J)")?K(a,b,e):-1<a.indexOf("(E)")?K(a,b,f):K(a,b);d||$(b).append('<i class="sortIcon fa fa-sort fa-lg sortDisabled"></i>');c.sort&&(d=$(b).find(".sortIcon")[0].classList,c.sort==
SORT_ASCENDING?(removeSortIcon(d),addAscIcon(d)):c.sort==SORT_DESCENDING&&(removeSortIcon(d),addDescIcon(d)),$($(b).find(".sortOrderSeq")).text(c.sortLevel),p.push(c),p=p.sort(function(a,b){return a.sortLevel-b.sortLevel}),t++)}function ba(a,b){var c=$(b).width();$(b).append(a);c+=$(a).width();$(b).width(c)}function aa(a,b){a.classList.remove("floatLeft");$.each($(a).find(".add-cursor"),function(){this.classList.remove("floatLeft")});var c;c="DATA_TAB"===k?$(b).find(".wholeColumn"):$("#rowColumnsContainer").find(".wholeColumn");
var d=c.length;0<d?(b=c[d-1],b.parentElement.insertBefore(a,b.nextSibling),$(b).width()>$(a).width()&&$(a).width($(b).width())):$(b).append(a);b=$(a.querySelector(".middleColumn")).width();$(a.querySelectorAll(".addHiddenColumnHeader")).width(b);$(a.querySelectorAll(".emptyFutureColumn")).width(b)}function S(a){viewOnly||($.each($(a).find(".middleColumn"),function(){this.addEventListener("dragstart",ma,!1);this.addEventListener("dragover",na,!0);this.addEventListener("dragenter",oa,!1);this.addEventListener("dragleave",
T,!1);this.addEventListener("drop",pa,!1);this.addEventListener("dragend",z,!1)}),$.each($(a).find(".emptyFutureColumn"),function(){this.addEventListener("dragover",qa,!1);this.addEventListener("dragenter",ra,!1);this.addEventListener("dragleave",sa,!1);this.addEventListener("drop",ta,!1);this.addEventListener("dragend",z,!1)}))}function ka(a){viewOnly||($.each($(a).find(".middleColumn"),function(){this.removeAttribute("draggable");ca(this)}),$.each($(a).find(".fieldInfo"),function(){this.setAttribute("draggable",
"true");L(this)}),$.each($(a).find(".emptyFutureColumn"),function(){U(this)}),a=$(a),a.hasClass("fieldInfo")&&(a[0].setAttribute("draggable","true"),L(a[0])))}function la(a){var b=0;$.each($(a).find(".wholeColumn"),function(){b+=$(this).width()});return b}function A(){B(newColumnList,$("[id^=columnsContainer]").find(".fieldInfo"));B(newGroupingList,$("#groupingContainer").find(".fieldInfo"));B(newRowColList,$("#rowColumnsContainer").find(".fieldInfo"));B(newRowList,$("#rowsContainer").find(".fieldInfo").get().reverse());
$.each(columnSetList,function(a,b){B(b,$($(".columnMeasureSet")[a]).find(".fieldInfo"))});da()}function da(){$.each(p,function(a,b){var c=b.sequence;$.each($(".fieldInfo"),function(){var a="column";$(this).closest(".rowsAndColumnsContainer").hasClass("groupingContainer")?a="group":$(this).closest(".rowsAndColumnsContainer").hasClass("rowColumnsContainer")?a="rowCol":$(this).closest(".rowsAndColumnsContainer").hasClass("rowsContainer")&&(a="row");b.type==a&&parseInt($(this).attr("sequence"))==c&&"DATA_TAB"!=
k&&$(this).find(".sortOrderSeq").text(b.sortLevel)})})}function B(a,b){var c=0;$.each(b,function(){$(this).attr("sequence")&&($(this).attr("preSeq",$(this).attr("sequence")),$(this).attr("sequence",c),c++)});$.each(a,function(c){var e=ua(b,"preSeq",a[c].sequence);a[c].sequence=$(e).attr("sequence")});a=a.sort(function(a,b){return a.sequence-b.sequence})}function ua(a,b,c){var d;$.each(a,function(){$(this).attr(b)==c&&(d=this)});return d}function v(a,b){var c=!1;a=$(a).closest(".rowsAndColumnsContainer");
b=$(b).closest(".rowsAndColumnsContainer");a.hasClass("groupingContainer")&&b.hasClass("groupingContainer")&&(c=!0);a.hasClass("rowColumnsContainer")&&b.hasClass("rowColumnsContainer")&&(c=!0);a.hasClass("rowsContainer")&&b.hasClass("rowsContainer")&&(c=!0);a.hasClass("columnsContainer")&&b.hasClass("columnsContainer")&&(c=!0);return c}function ma(a){this.style.opacity="0.7";$(".columnSelected").removeClass("columnSelected");a=$(this).find(".addColumnHeader")[0];void 0==a?$(this).addClass("columnSelected"):
a.classList.add("columnSelected");h=this}function na(a){a.preventDefault&&a.preventDefault();var b=$(this).closest(".rowsAndColumnsContainer").hasClass("groupingContainer");v(h,this)&&h!=this&&(b||"DATA_TAB"==k||($($(this.parentElement).find(".addColumnHeader")).removeClass("defaultHeaderBackground"),$($(this.parentElement).find(".addColumnHeader")).addClass("overHeaderBackground")),$($(this.parentElement).find(".emptyFutureColumn")).addClass("over"),$($(this.parentElement).find(".emptyFutureColumn")).removeAttr("hidden"));
a.stopPropagation();return!1}function oa(a){a.stopPropagation();v(h,this)&&h!=this&&($($(this.parentElement).find(".emptyFutureColumn")).addClass("over"),$($(this.parentElement).find(".emptyFutureColumn")).removeAttr("hidden"))}function T(a){a.stopPropagation()}function pa(a){a.stopPropagation&&a.stopPropagation();a=f;f=h;var b=l(),c=$(this).closest(".rowsAndColumnsContainer").hasClass("groupingContainer");if(v(h,this)&&h!=this&&!c&&"DATA_TAB"!=k){var d=this;$.each($(h).find(".fieldInfo"),function(){var a=
this.cloneNode(!0);f=a;var c=$(d).find(".addColumnHeader").length-1,c=$(d).find(".addColumnHeader")[c];d.insertBefore(a,c.nextSibling);var h=$(c).attr("stackId");0<h?($(a).attr("stackId",h),b[$(a).attr("sequence")].stackId=h):($(c).attr("stackId",m),$(a).attr("stackId",m),b[$(c).attr("sequence")].stackId=m,b[$(a).attr("sequence")].stackId=m,m++)});$(h.parentElement).remove();A()}$.each($(".wholeColumn"),function(){1>$(this).find("div.fieldInfo").length&&$(this).remove()});$.each($(".middleColumn"),
function(){1>$(this).find("div.fieldInfo").length&&$(this).remove()});f=a;$($(this.parentElement).find(".emptyFutureColumn")).attr("hidden","hidden");return!1}function z(a){this.style.opacity="1";[].forEach.call($(".add-cursor"),function(a){a.classList.remove("over");a.classList.remove("overEmpty")});[].forEach.call($(".columnSelected"),function(a){a.classList.remove("columnSelected");a.classList.add("addColumnHeader")});[].forEach.call($(".addColumnHeader"),function(a){a.classList.remove("overHeaderBackground");
a.classList.add("defaultHeaderBackground")});[].forEach.call($(".emptyFutureColumn"),function(a){$(a).attr("hidden","hidden")});$.each($(".wholeColumn"),function(){1>$(this).find("div.fieldInfo").length&&$(this).remove()});$.each($(".middleColumn"),function(){1>$(this).find("div.fieldInfo").length&&$(this).remove()});A()}function qa(a){a.preventDefault&&a.preventDefault();h.parentElement!=this.parentElement&&($(this).addClass("overEmpty"),$($(this.parentElement).find(".emptyFutureColumn")).removeAttr("hidden"));
a.stopPropagation();return!1}function ra(a){a.stopPropagation();h.parentElement!=this.parentElement&&($(this).addClass("overEmpty"),$($(this).find(".emptyFutureColumn")).removeAttr("hidden"),$($(this.parentElement).find(".addColumnHeader")).removeClass("overHeaderBackground"),$($(this.parentElement).find(".addColumnHeader")).addClass("defaultHeaderBackground"))}function sa(a){a.stopPropagation();$(this).removeClass("overEmpty");$($(this.parentElement).find(".emptyFutureColumn")).attr("hidden","hidden")}
function ta(a){a.stopPropagation&&a.stopPropagation();$(this).closest(".rowsAndColumnsContainer").hasClass("rowsContainer")?($(this).hasClass("addLeft")&&this.parentElement.parentElement.insertBefore(h.parentElement,this.parentElement.nextSibling),$(this).hasClass("addRight")&&this.parentElement.parentElement.insertBefore(h.parentElement,this.parentElement)):($(this).hasClass("addLeft")&&this.parentElement.parentElement.insertBefore(h.parentElement,this.parentElement),$(this).hasClass("addRight")&&
this.parentElement.parentElement.insertBefore(h.parentElement,this.parentElement.nextSibling));$($(this.parentElement).find(".emptyFutureColumn")).attr("hidden","hidden");return!1}function va(a){this.style.opacity="0.7";$(".rowcolumnSelected").removeClass("rowcolumnSelected");void 0==this?$(this).addClass("rowcolumnSelected"):this.classList.add("rowcolumnSelected");h=this}function ea(a){a.preventDefault&&a.preventDefault();var b=$(this).closest(".rowsAndColumnsContainer").hasClass("groupingContainer");
v(h,this)&&h!=this&&(b||"DATA_TAB"==k||($($(this.parentElement).find(".addColumnHeader")).removeClass("defaultHeaderBackground"),$($(this.parentElement).find(".addColumnHeader")).addClass("overHeaderBackground")),$($(this.parentElement).find(".emptyFutureColumn")).addClass("over"),$($(this.parentElement).find(".emptyFutureColumn")).removeAttr("hidden"));a.stopPropagation();return!1}function fa(a){a.stopPropagation();v(h,this)&&h!=this&&($($(this.parentElement).find(".emptyFutureColumn")).addClass("over"),
$($(this.parentElement).find(".emptyFutureColumn")).removeAttr("hidden"))}function ga(a){a.stopPropagation&&a.stopPropagation();a=f;f=h;var b=l();$(this).closest(".rowsAndColumnsContainer").hasClass("groupingContainer");if(v(h,this)){var c=$(".rowcolumnSelected")[0].cloneNode(!0);$(c).removeClass("rowcolumnSelected");f=c;var d=$(this).find(".addColumnHeader").length-1,d=$(this).find(".addColumnHeader")[d];$(c).attr("draggable","true");$(c).addClass("addParent");L(c);this.insertBefore(c,d.nextSibling);
var e=$(d).attr("stackId");0<e?($(c).attr("stackId",e),b[$(c).attr("sequence")].stackId=e):($(d).attr("stackId",m),$(c).attr("stackId",m),b[$(d).attr("sequence")].stackId=m,b[$(c).attr("sequence")].stackId=m,m++);$(".rowcolumnSelected")[0].remove();var g=0;$.each($(".middleColumn "),function(a,b){$.each($(b).find(".fieldInfo"),function(a,b){$(b).addClass("defaultHeaderBackground");$(b).removeClass("overHeaderBackground");$(b).css("opacity","1");g++})})}$('[data-toggle="popover"]').popover();$.each($(".wholeColumn"),
function(){1>$(this).find("div.fieldInfo").length&&$(this).remove()});$.each($(".middleColumn"),function(){1>$(this).find("div.fieldInfo").length&&$(this).remove()});f=a;$($(this.parentElement).find(".emptyFutureColumn")).attr("hidden","hidden");A();return!1}function wa(a){a.preventDefault&&a.preventDefault();h.parentElement!=this.parentElement&&($(this).addClass("overEmpty"),$($(this.parentElement).find(".emptyFutureColumn")).removeAttr("hidden"));a.stopPropagation();return!1}function xa(a){a.stopPropagation();
h.parentElement!=this.parentElement&&($(this).addClass("overEmpty"),$($(this).find(".emptyFutureColumn")).removeAttr("hidden"),$($(this.parentElement).find(".addColumnHeader")).removeClass("overHeaderBackground"),$($(this.parentElement).find(".addColumnHeader")).addClass("defaultHeaderBackground"))}function ya(a){a.stopPropagation();$(this).removeClass("overEmpty");$($(this.parentElement).find(".emptyFutureColumn")).attr("hidden","hidden")}function za(a){a.stopPropagation&&a.stopPropagation();if($(h).closest(".rowsAndColumnsContainer").hasClass("columnsContainer")){a=
document.createElement("div");a.className="floatLeft middleColumn add-cursor";var b=$(h)[0].getAttribute("sequence");delete newColumnList[parseInt(b)].stackId;a.appendChild($(h)[0]);b=document.createElement("div");b.className="emptyColumnContent";a.appendChild(b);b=document.createElement("div");b.className="floatLeft wholeColumn";var c=document.createElement("div");c.className="floatLeft emptyFutureColumn addLeft add-cursor";var d=document.createElement("div");d.className="addHiddenColumnHeader";
c.appendChild(d);d=document.createElement("div");d.className="emptyColumnContent";c.appendChild(d);U(c);b.appendChild(c);b.appendChild(a);c=document.createElement("div");c.className="floatLeft emptyFutureColumn addRight add-cursor";d=document.createElement("div");d.className="addHiddenColumnHeader";c.appendChild(d);d=document.createElement("div");d.className="emptyColumnContent";c.appendChild(d);U(c);b.appendChild(c);$('[data-toggle="popover"]').popover();$(this).hasClass("addLeft")&&this.parentElement.parentElement.insertBefore(b,
this.parentElement);$(this).hasClass("addRight")&&this.parentElement.parentElement.insertBefore(b,this.parentElement.nextSibling);ca(a);L($(h)[0])}else $(this).hasClass("addLeft")&&this.parentElement.parentElement.insertBefore(h.parentElement,this.parentElement),$(this).hasClass("addRight")&&this.parentElement.parentElement.insertBefore(h.parentElement,this.parentElement.nextSibling);$($(this.parentElement).find(".emptyFutureColumn")).attr("hidden","hidden");return!1}function ca(a){a.addEventListener("dragover",
ea,!0);a.addEventListener("dragenter",fa,!1);a.addEventListener("dragleave",T,!1);a.addEventListener("drop",ga,!1);a.addEventListener("dragend",z,!1)}function L(a){a.addEventListener("dragstart",va,!1);a.addEventListener("dragover",ea,!0);a.addEventListener("dragenter",fa,!1);a.addEventListener("dragleave",T,!1);a.addEventListener("drop",ga,!1);a.addEventListener("dragend",z,!1)}function U(a){a.addEventListener("dragover",wa,!1);a.addEventListener("dragenter",xa,!1);a.addEventListener("dragleave",
ya,!1);a.addEventListener("drop",za,!1);a.addEventListener("dragend",z,!1)}function ha(a){newColumnList=newColumnList.filter(function(b){return b.setId!=a});$("#removeCLLSet"+a).remove();$("#columnsContainer"+a).parent().parent().remove();for(var b=$(".columnsContainer .containerToBeSelected"),c=0,d=0;d<b.length;d++){var e=parseInt($(b[d]).attr("data-setid"));e>c&&(c=e)}if(c>a)for(d=a+1;d<=c;d++){for(b=0;b<newColumnList.length;b++)newColumnList[b].setId==d&&(newColumnList[b].setId=d-1);$("#columnsContainer"+
d).attr("data-setid",d-1);$("#columnsContainer"+d).attr("id","columnsContainer"+(d-1));$("#removeCLLSet"+d).attr("data-setid",d-1);$("#removeCLLSet"+d).attr("id","removeCLLSet"+(d-1))}A()}function Aa(){for(var a=$(".columnsContainer .containerToBeSelected"),b=0;b<a.length;b++)if(0==$(a[b]).find(".floatLeft").length)return!0;return!1}function Ba(){if("CASE_LINE"==k&&Aa())$("#warningModal").modal("show"),$("#warningButton").unbind("click").click(function(){for(var a=$(".columnsContainer .containerToBeSelected"),
b=0,c=0;c<a.length;c++){var d=parseInt($(a[c]).attr("data-setid"));d>b&&(b=d)}for(c=b;0<=c;c--)0==$("#columnsContainer"+c).find(".floatLeft").length&&ha(c);$("#warningModal").modal("hide");return ia()});else return ia();return!1}function ia(){0==newColumnList.length?$("#columns").val(""):$("#columns").val(JSON.stringify(newColumnList));0==newGroupingList.length?$("#grouping").val(""):$("#grouping").val(JSON.stringify(newGroupingList));0==newRowColList.length?$("#rowCols").val(""):$("#rowCols").val(JSON.stringify(newRowColList));
0==newRowList.length?$("#rows").val(""):$("#rows").val(JSON.stringify(newRowList));0==numOfReassessListedness&&$("#reassessListedness").select2("val","");setValidMeasureIndexList();$.each(columnSetList,function(a,b){0==b.length?$("#columns"+a).val(""):$("#columns"+a).val(JSON.stringify(b))});setCLLIdsForTemplateSet();if("CASE_LINE"==$("#templateType").val()){if(!checkAllNumberFields())return!1;sendReassessListedness();removeEmptyGroups(builderAll);printToJSON()}return!0}function V(a,b){a?($(".measureOptions").hide(),
$($(".columnRenameArea")[0]).slideDown(),a=$($(".columnRenameArea .selectedColumnWidth")[0]),0<$(b).parents(".columnMeasureSet").length?a.prop("disabled",!0):a.prop("disabled",!1)):$($(".columnRenameArea")[0]).hide()}function Ca(a){var b=$(".columnRenameArea")[0];a?($($(b).find(".customExpressionArea")[0]).removeAttr("hidden"),$($(b).find(".customExpressionValue")[0]).val(a)):($($(b).find(".customExpressionArea")[0]).attr("hidden","hidden"),$($(b).find(".customExpressionValue")[0]).val(""))}function Da(a){var b=
$(".columnRenameArea")[0];a?($($(b).find(".advancedSortingArea")[0]).removeAttr("hidden"),$($(b).find(".advancedSortingValue")[0]).val(a)):($($(b).find(".advancedSortingArea")[0]).attr("hidden","hidden"),$($(b).find(".advancedSortingValue")[0]).val(""))}function l(){var a=$(f).closest(".rowsAndColumnsContainer").hasClass("groupingContainer"),b=$(f).closest(".rowsAndColumnsContainer").hasClass("rowColumnsContainer"),c=$(f).closest(".rowsAndColumnsContainer").hasClass("rowsContainer");a?a=newGroupingList:
b?a=newRowColList:c?a=newRowList:"DATA_TAB"==k?(a=$(f).closest(".columnMeasureSet").attr("sequence"),a=columnSetList[parseInt(a)]):a=newColumnList;return a}viewOnly="false"===$("#editable").val();var k=$("#templateType").val(),f,D=0,m=1,R={},J=0,H=0,I=0,p=[],t=1,N={CLL:"CLL",DT_ROW:"DT_ROW",DT_COLUMN:"DT_COLUMN"},P="column",h=null;$("#sourceProfile").select2();$("#templateSourceProfileDiv").on("change","#sourceProfile",function(){g(k,tmpltReportFieldsOptsBySource,!1,$(this).val())});viewOnly||"undefined"!==
typeof tmpltDefaultReportFieldsOpts&&g(k,tmpltDefaultReportFieldsOpts,!0);$("#templateFooter").autocomplete({source:$("#templateFooter").data("select"),minLength:0});$("#columns").val()&&$.each(JSON.parse($("#columns").val()),function(){var a=0;this.setId&&0<parseInt(this.setId)&&(a=parseInt(this.setId),document.getElementById("columnsContainer"+a)||Z(a));C(this,document.getElementById("columnsContainer"+a))});$("#grouping").val()&&$.each(JSON.parse($("#grouping").val()),function(){O(this,document.getElementById("groupingContainer"))});
$("#rowCols").val()&&$.each(JSON.parse($("#rowCols").val()),function(){X(this,document.getElementById("rowColumnsContainer"))});$("#rows").val()&&$.each(JSON.parse($("#rows").val()),function(){Y(this,document.getElementById("rowsContainer"))});numColMeas=parseInt($("#numColMeas").val());for(var w=0;w<numColMeas;w++)columnSetList.push([]),$("#columns"+w).val()&&$.each(JSON.parse($("#columns"+w).val()),function(){C(this,document.getElementById("columnsContainer"+w),w)});if(viewOnly)if("CUSTOM_SQL"==
k||"NON_CASE"==k)$.each($(".sqlBox"),function(){this.disabled=!0}),$("#usePvrDB").parent().removeClass("add-cursor"),$("#usePvrDB").attr("disabled",!0);else if("CASE_LINE"==k||"DATA_TAB"==k){var M;$("#pageBreakByGroup").attr("disabled",!0);$("#pageBreakByGroup").parent().removeClass("add-cursor");"CASE_LINE"==k?($("#columnShowTotal").attr("disabled",!0),$("#columnShowSubTotal").attr("disabled",!0),$("#columnShowDistinct").attr("disabled",!0),$("#columnShowDistinct").parent().removeClass("add-cursor"),
$("#columnShowTotal").parent().removeClass("add-cursor"),$("#columnShowSubTotal").parent().removeClass("add-cursor"),$(".removeCLLSet").remove(),$("#addCLLSet").remove(),M=$(".row.columnsContainer")[0].parentElement,$("#showAdvancedSorting").attr("disabled",!0).removeClass("add-cursor").css({cursor:"not-allowed"}).click(function(a){return!1}),$("#advancedSortingValue").attr("disabled",!0),$("#templateFooter").attr("disabled",!0)):($("#addColumnMeasure").hide(),$(".removeColumnMeasure").hide(),$(".selectMeasure").hide(),
$(".showTotalIntervalCases").attr("disabled",!0),$(".showTotalIntervalCases").parent().removeClass("add-cursor"),$(".showTotalCumulativeCases").attr("disabled",!0),$(".showTotalCumulativeCases").parent().removeClass("add-cursor"),$("#showChartSheet").attr("disabled",!0),$("#supressHeaders").attr("disabled",!0),$("#supressRepeatingExcel").attr("disabled",!0),$("#drillDownToCaseList").attr("disabled",!0),$("#transposeOutput").attr("disabled",!0),$("#showChartSheet").parent().removeClass("add-cursor"),
$("#supressHeaders").parent().removeClass("add-cursor"),$("#supressRepeatingExcel").parent().removeClass("add-cursor"),$("#drillDownToCaseList").parent().removeClass("add-cursor"),$("#transposeOutput").parent().removeClass("add-cursor"),M=$("#dataTabulation").find(".previewLabel")[0]);M.classList.remove("col-xs-9");M.classList.add("col-xs-12");$.each($(".rowsAndColumnsContainer"),function(){this.classList.remove("selectedContainerBorder")});$("#reassessListedness").prop("disabled",!0);$("#reassessForProduct").prop("disabled",
!0)}var r=!1;$("#selectedTemplate_lineListing").select2();$("#selectedTemplate_dataTabulation").select2();$("#reassessListedness").select2();$("#selectDatasheet").select2().on("change",function(a){var b=$(f.parentElement).attr("sequence");l()[b].datasheet=a.val});$(document).on("click",".rowsAndColumnsContainer",function(){viewOnly||($.each($(".selectedContainerBorder"),function(){this.classList.remove("selectedContainerBorder")}),$(this).hasClass("rowsContainer")||$(this).hasClass("groupingContainer")?
(P="row",$("#dtRowSelect2").show(),$("#dtColumnSelect2").hide()):"DATA_TAB"==k&&(P="column",$("#dtColumnSelect2").show(),$("#dtRowSelect2").hide()),this.classList.add("selectedContainerBorder"))});$(document).on("click",".columnName",function(){$.each($(".columnSelected"),function(){this.classList.remove("columnSelected")});var a=this.parentElement;a.classList.add("columnSelected");f=this;var b=l(),c=$(a).attr("sequence");Ca(b[c].customExpression);Da(b[c].advancedSorting);V(!0,a);var d=$(".columnRenameArea")[0],
e=$(a).attr("fieldName"),h=$(a).attr("fieldLabelJ"),g=$(a).attr("fieldLabelE");b[c].renameValue&&(e=b[c].renameValue);-1<e.indexOf("(J)")?$($(d).find(".selectedColumnName")[0]).val(h):-1<e.indexOf("(E)")?$($(d).find(".selectedColumnName")[0]).val(g):$($(d).find(".selectedColumnName")[0]).val(e);h=$(a).attr("legend");b[c].newLegendValue&&(h=b[c].newLegendValue);d=$(".columnRenameArea")[0];$($(d).find(".selectedColumnLegend")[0]).val(h);a=$(a).attr("columnWidth");b[c].columnWidth&&(a=b[c].columnWidth);
$($(d).find(".selectedColumnWidth")[0]).val(a);b[c].redactedValue?($(".redactedValue")[0].checked=!0,$($(d).find(".customExpressionArea")[0]).attr("hidden","hidden"),$(".blindedValues")[0].checked=!1):b[c].blindedValue?($(".blindedValues")[0].checked=!0,$($(d).find(".customExpressionArea")[0]).attr("hidden","hidden"),$(".redactedValue")[0].checked=!1):($(".redactedValue")[0].checked=!1,b[c].fromBlindedList?$(".blindedValues")[0].checked=!0:$(".blindedValues")[0].checked=!1);b[c].fromBlindedList?$(".showCustomExpression").hide():
$(".showCustomExpression").show();"CASE_LINE"==k&&(b[c].commaSeparatedValue?$(".commaSeparated")[0].checked=!0:$(".commaSeparated")[0].checked=!1,b[c].suppressRepeatingValues?$(".suppressRepeating")[0].checked=!0:$(".suppressRepeating")[0].checked=!1,b[c].suppressLabel?$(".suppressLabel")[0].checked=!0:$(".suppressLabel")[0].checked=!1,b[c].sortLevel?$($(d).find(".showAdvancedSorting")[0]).removeAttr("hidden"):$($(d).find(".showAdvancedSorting")[0]).attr("hidden","hidden"));"Re-assess Listedness"===
e||"\u65e2\u77e5/\u672a\u77e5\u518d\u8a55\u4fa1"===e||"\u65e2\u77e5/\u672a\u77e5\u518d\u8a55\u4fa1 (E)"===e||"Re-assess Listedness (J)"===e?($(".datasheetOption").show(),(d=b[c].datasheet)?$("#selectDatasheet").select2("val",d):(d=$("#selectDatasheet").select2("val"),b[c].datasheet=d?d:"")):$(".datasheetOption").hide();viewOnly&&($("input").prop("disabled",!0),$("button").prop("disabled",!0),$("textarea").prop("disabled",!0),$("#selectDatasheet").prop("disabled",!0),$.each($(":checkbox"),function(){this.parentElement.classList.remove("add-cursor")}));
$(".viewButtons").attr("disabled")&&$(".viewButtons").removeAttr("disabled","disabled")});$(document).on("click",".closeRenameArea",function(){V(!1);f.parentElement.classList.remove("columnSelected");f=null});$(document).on("click","#addCLLSet",function(){var a=-1;$.each($(".containerToBeSelected"),function(){var b=parseInt($(this).attr("data-setid"));b>a&&(a=b)});a++;Z(a)});$(document).on("click",".removeCLLSet",function(){if(2<$("[id^=columnsContainer]").length){var a=parseInt($(this).attr("data-setid"));
ha(a)}});$(document).on("click",".commaSeparated",function(){var a=$(f.parentElement).attr("sequence");l()[a].commaSeparatedValue=this.checked?!0:!1});$(document).on("click",".suppressRepeating",function(){var a=$(f.parentElement).attr("sequence");l()[a].suppressRepeatingValues=this.checked?!0:!1});$(document).on("click",".suppressLabel",function(){var a=$(f.parentElement).attr("sequence");l()[a].suppressLabel=this.checked?!0:!1});$(".cLLCheckBoxes").on("click",".redactedValue",function(){var a=f.parentElement,
b=$(a).attr("sequence"),c=l(),d=$($(".columnRenameArea")[0]).find(".customExpressionArea")[0];this.checked?(c[b].redactedValue=!0,$(".cLLCheckBoxes").find(".blindedValues").prop("checked",!1),c[b].blindedValue=!1,$(".customExpressionValue").val("decode (1,1,'Redacted', "+$(a).attr("argusName")+")")):(c[b].redactedValue=!1,c[b].fromBlindedList?(c[b].blindedValue=!0,$(".cLLCheckBoxes").find(".blindedValues").prop("checked",!0),$(".customExpressionValue").val("decode ("+blindedValueVariable+",0,'Blinded', "+
$(a).attr("argusName")+")")):($(d).attr("hidden","hidden"),$(".customExpressionValue").val($(a).attr("argusName"))));$(".customExpressionValue").trigger("change")});$(".cLLCheckBoxes").on("click",".blindedValues",function(){var a=f.parentElement,b=$(a).attr("sequence"),c=l(),d=$($(".columnRenameArea")[0]).find(".customExpressionArea")[0];this.checked?(c[b].blindedValue=!0,$(".cLLCheckBoxes").find(".redactedValue").prop("checked",!1),c[b].redactedValue=!1):(c[b].blindedValue=!1,c[b].fromBlindedList?
($(".cLLCheckBoxes").find(".redactedValue").prop("checked",!0),c[b].redactedValue=!0,$(".customExpressionValue").val("decode (1,1,'Redacted', "+$(a).attr("argusName")+")")):$(d).attr("hidden","hidden"));$(".customExpressionValue").val($(a).attr("argusName"));$(".customExpressionValue").trigger("change")});$(document).on("click",".showCustomExpression",function(){var a=$(f.parentElement).attr("sequence"),b=l(),c=$($(".columnRenameArea")[0]).find(".customExpressionArea")[0];c.hasAttribute("hidden")?
($(c).removeAttr("hidden"),c=$(f.parentElement).attr("argusName"),b[a].customExpression&&(c=b[a].customExpression),$($(".columnRenameArea")[0]).find(".customExpressionValue")[0].value=c):$(c).attr("hidden","hidden")});$(document).on("click",".showAdvancedSorting",function(){var a=$(f.parentElement).attr("sequence"),b=l(),c=$($(".columnRenameArea")[0]).find(".advancedSortingArea")[0];$(c).attr("hidden")?($(c).removeAttr("hidden"),c=$(f.parentElement).attr("argusName"),b[a].advancedSorting&&(c=b[a].advancedSorting),
$($(".columnRenameArea")[0]).find(".advancedSortingValue")[0].value=c):$(c).attr("hidden","hidden")});$(document).on("change",".customExpressionValue",function(){var a=$(f.parentElement).attr("sequence"),b=$(".columnRenameArea")[0],b=$($(b).find(".customExpressionValue")[0]).val();if(b.trim()===$(f.parentElement).attr("argusName")||""===b.trim())b="";l()[a].customExpression=decodeFromHTML(b)});$(document).on("change",".advancedSortingValue",function(){var a=$(f.parentElement).attr("sequence"),b=$(".columnRenameArea")[0],
b=$($(b).find(".advancedSortingValue")[0]).val().trim();b!=$(f.parentElement).attr("argusName")&&""!=b||""==b;l()[a].advancedSorting=b});$(document).on("change",".selectedColumnName",function(){var a=f.parentElement,b=$(a).attr("sequence"),c=$(".columnRenameArea")[0],c=$($(c).find(".selectedColumnName")).val(),d=l();c!=$(a).attr("fieldName")?(d[b].renameValue=c,$(a).attr("renamedTo",c)):(d[b].renameValue=null,$(a).removeAttr("renamedTo"));$(f).text(c);(a=$(a).attr("description"))?$(f).html('<i data-toggle="popover" data-trigger="hover"  data-container="body" data-content="'+
replaceBracketsAndQuotes(a)+'"><span class="fa fa-info-circle" style="font-size: 16px; cursor: pointer"></span></i> '+encodeToHTML(c)):$(f).text(c);$('[data-toggle="popover"]').popover()});$(document).on("change",".selectedColumnLegend",function(){var a=f.parentElement,b=$(a).attr("sequence"),c=$(".columnRenameArea")[0],c=$($(c).find(".selectedColumnLegend")).val().trim(),d=l();c!=$(a).attr("legend")?(d[b].newLegendValue=c,$(a).attr("renamedLegendTo",c)):(d[b].renameValue=null,$(a).removeAttr("renamedLegendTo"))});
$(document).on("click",".resetThisColLegend",function(){var a=f.parentElement,b=$(a).attr("legend"),c=$(".columnRenameArea")[0];$($(c).find(".selectedColumnLegend")[0]).val(b);$(a).removeAttr("renamedLegendTo");l()[$(a).attr("sequence")].newLegendValue=null});$(document).on("click",".resetThisCol",function(){var a=f.parentElement,b=$(a).attr("fieldName"),c=$(".columnRenameArea")[0];$($(c).find(".selectedColumnName")[0]).val(b);(c=$(a).attr("description"))?$(f).html('<i data-toggle="popover" data-trigger="hover"  data-container="body" data-content="'+
replaceBracketsAndQuotes(c)+'"><span class="fa fa-info-circle" style="font-size: 16px; cursor: pointer"></span></i> '+encodeToHTML(b)):$(f).text(b);$('[data-toggle="popover"]').popover();$(a).removeAttr("renamedTo");l()[$(a).attr("sequence")].renameValue=null});$(document).on("change",".selectedColumnWidth",function(){var a=f.parentElement,b=$(a).attr("sequence"),c=$(".columnRenameArea")[0],c=$($(c).find(".selectedColumnWidth")).val(),d=l();c!=$(a).attr("columnWidth")?d[b].columnWidth=c:d[b].columnWidth=
null});$(document).on("click",".resetThisColWidth",function(){var a=f.parentElement,b=$(a).attr("columnWidth"),c=$(".columnRenameArea")[0];$($(c).find(".selectedColumnWidth")[0]).val(b);l()[$(a).attr("sequence")].columnWidth=null});$(document).on("click",".sortIcon",function(){if(!viewOnly){$.each($(".columnSelected"),function(){this.classList.remove("columnSelected")});var a=$(".columnRenameArea")[0],b=this.parentElement;b.classList.add("columnSelected");var c=$(b).attr("sequence"),d=f;f=this;var e=
l();this.classList.contains("sortDisabled")?(removeSortIcon(this.classList),addAscIcon(this.classList),this.style.opacity=1,e[c].sortLevel=t,e[c].sort=SORT_ASCENDING,p.push(e[c]),"DATA_TAB"!=k&&($($(b).find(".sortOrderSeq")).text(t),e[c].sortLevel&&$($(a).find(".showAdvancedSorting")[0]).removeAttr("hidden")),t++):this.classList.contains("sortAscending")?(removeAscIcon(this.classList),addDescIcon(this.classList),this.style.opacity=1,e[c].sort=SORT_DESCENDING,"DATA_TAB"!=k&&$($(b).find(".sortOrderSeq")).text(t-
1)):this.classList.contains("sortDescending")&&(removeDescIcon(this.classList),addSortIcon(this.classList),this.style.opacity=.3,e[c].sortLevel=0,e[c].sort=SORT_DISABLED,c=p.indexOf(e[c]),p.splice(c,1),$.each(p,function(a,b){b.sortLevel=a+1}),"DATA_TAB"!=k&&($($(b).find(".sortOrderSeq")).text(""),$($(a).find(".showAdvancedSorting")[0]).attr("hidden","hidden")),t--);da();f=d}});$(document).on("click",".undoTagButton",function(){var a;0<undoTagList.length?(a=undoTagList[undoTagList.length-1][0],$($('div[fieldid="'+
a.id+'"]').closest(".wholeColumn")).remove(),undoTagList=undoTagList.splice(0,undoTagList.length-1),0==undoTagList.length&&$("#resetTagId").hide(),removeLastTag++):$("#resetTagId").hide()});$(document).on("click",".removeColumn",function(){var a=$(this).closest(".rowsAndColumnsContainer").hasClass("groupingContainer"),b=$(this).closest(".rowsAndColumnsContainer").hasClass("rowColumnsContainer"),c=$(this).closest(".rowsAndColumnsContainer").hasClass("rowsContainer"),d=$(this).closest(".columnMeasureSet").attr("sequence");
if(!viewOnly){var e=this.parentElement,h=$(e).attr("sequence"),g=$(e).attr("fieldName"),n=f;f=this;var m=l(),q=m[h].sortLevel;V(!1);if("Re-assess Listedness"===g||"\u65e2\u77e5/\u672a\u77e5\u518d\u8a55\u4fa1"===g||"\u65e2\u77e5/\u672a\u77e5\u518d\u8a55\u4fa1 (E)"===g||"Re-assess Listedness (J)"===g)numOfReassessListedness--,0===numOfReassessListedness&&($("#reassessListedness").select2("val",""),$(".reassessListedness").hide());g=e.parentElement.parentElement;if(0<m[h].stackId)$(e).remove(),1==$(g).find(".fieldInfo").length&&
(m[h].stackId=0);else{if(c){var e=$(g.parentElement).width(),r=$(g.parentElement.parentElement).width();e>r&&(e-=$(g).width(),e<r&&(e=r),$(g.parentElement).width(e))}else b||"DATA_TAB"===k||(e=$(g.parentElement).width(),e-=$(g).width(),$(g.parentElement).width(e));$(g).remove()}0<q&&(q=p.indexOf(m[h]),p.splice(q,1),$.each(p,function(a,b){b.sortLevel=a+1}),t--);m.splice(h,1);c?J--:a?H--:b?I--:"DATA_TAB"==k?sequence_col_dt[d]--:D--;A();f=n}});$("#templateForm").submit(function(a){return Ba()})});
function removeSortIcon(g){g.remove("fa-sort");g.remove("sortDisabled")}function removeAscIcon(g){g.remove("fa-sort-asc");g.remove("sortAscending");g.remove("sortEnabled")}function removeDescIcon(g){g.remove("fa-sort-desc");g.remove("sortDescending");g.remove("sortEnabled")}function addSortIcon(g){g.add("fa-sort");g.add("sortDisabled")}function addAscIcon(g){g.add("fa-sort-asc");g.add("sortAscending");g.add("sortEnabled")}
function addDescIcon(g){g.add("fa-sort-desc");g.add("sortDescending");g.add("sortEnabled")};