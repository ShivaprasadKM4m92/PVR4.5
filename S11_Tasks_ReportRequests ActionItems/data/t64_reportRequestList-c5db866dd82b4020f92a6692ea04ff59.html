//# sourceMappingURL=reportRequestList.js.map
var reportRequest=reportRequest||{};
reportRequest.reportRequestList=function(){var d={},e=!1,f=window.location.pathname.replace(/\//g,"")+".assignedTo",g,h=function(){var a=$("#reportRequestList_filter").parent(),c=$("#assignedToFilterControl");a.find("label").css("margin-bottom","-2px");a.attr("class","col-xs-3");a.parent().addClass("searchToolbar");a.before($("#assignedToFilter"));bindShareWith(c,sharedWithListUrl,sharedWithValuesUrl,"250px",!0).on("change",function(a){sessionStorage.setItem(f,$("#assignedToFilterControl").val());
g.draw()});$("#statusFilter").select2({placeholder:$.i18n._("selectOne"),allowClear:!0}).on("change",function(){$("#reportRequestList").DataTable().ajax.reload(function(a){},!1).draw()})},k=function(){var a=[{label:$.i18n._("app.advancedFilter.requestId"),type:"value",name:"id"},{label:$.i18n._("app.advancedFilter.requestSummary"),type:"text",name:"reportName"},{label:$.i18n._("app.advancedFilter.description"),type:"text",name:"description"},{label:$.i18n._("app.advancedFilter.dueDateStart"),type:"date-range",
group:"dueDate",group_order:1},{label:$.i18n._("app.advancedFilter.dueDateEnd"),type:"date-range",group:"dueDate",group_order:2},{label:$.i18n._("app.advancedFilter.priority"),type:"select2-id",name:"priority",ajax:{url:"/reports/reportRequestType/listPriority",data_handler:function(a){return pvr.filter_util.build_options(a,"id","name",!0)},error_handler:function(a){console.log(a)}}}];pvr.filter_util.construct_right_filter_panel({table_id:"#reportRequestList",container_id:"config-filter-panel",filter_defs:a,
column_count:1,done_func:function(a){d=a;e=!0;$("#reportRequestList").DataTable().ajax.reload(function(a){},!1).draw()}})};return{init_report_request_table:function(){$("#assignedToFilterControl").val(sessionStorage.getItem(f)?sessionStorage.getItem(f):"");g=$("#reportRequestList").DataTable({sPaginationType:"bootstrap",stateSave:!0,stateDuration:-1,language:{url:"../assets/i18n/dataTables_"+userLocale+".json"},fnInitComplete:function(){h();actionButton("#reportRequestList")},processing:!0,serverSide:!0,
ajax:{url:reportRequestListUrl,dataSrc:"data",data:function(a){a.searchString=a.search.value;""!=$("#statusFilter").val()?(d&&""!=d||(d={}),d.workflowState={type:"id",name:"workflowState",value:$("#statusFilter").val()},e=!0):delete d.workflowState;a.tableFilter=JSON.stringify(d);a.advancedFilter=e;a.sharedwith=$("#assignedToFilterControl").val();0<a.order.length&&(a.direction=a.order[0].dir,a.sort=a.columns[a.order[0].column].data)}},aaSorting:[[0,"desc"]],bLengthChange:!0,iDisplayLength:10,aoColumns:[{mData:"reportRequestId",
mRender:function(a,c,b){return'<span id="reportRequestId">'+b.reportRequestId+"</span>"}},{mData:"requestName",mRender:function(a,c,b){return encodeToHTML(a)}},{mData:"assignedTo",bSortable:!1},{mData:"description",mRender:function(a,c,b){c=50<a.length?a.substring(0,50)+"...":a;return'<span title="'+encodeToHTML(a)+'">'+encodeToHTML(c)+"</span>"}},{mData:"dueDate",aTargets:["dueDate"],sClass:"dataTableColumnCenter",mRender:function(a,c,b){return a?moment(a).format(DEFAULT_DATE_DISPLAY_FORMAT):""}},
{mData:"priority"},{mData:"status",bSortable:!1,mRender:function(a,c,b){return'<button class="btn btn-default btn-xs" style="min-width: 100px" data-reportRequest-id= "'+b.reportRequestId+'" data-initial-state= "'+b.status+'" onclick="openStateHistoryModal(this)">'+b.status+"</button>"}},{mData:null,bSortable:!1,mRender:function(a,c,b){return'<div class="btn-group dropdown dataTableHideCellContent" align="center">                             <a class="btn btn-success btn-xs" href="show?id='+b.reportRequestId+
'" data-value="'+b.reportRequestId+'">'+$.i18n._("view")+'</a>                             <button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown">                                <span class="caret"></span>                                <span class="sr-only">Toggle Dropdown</span>                             </button>                             <ul class="dropdown-menu dropdown-menu-right" role="menu" style=" font-size: 12px;">                                 <li role="presentation"><a class="work-flow-edit" role="menuitem" href="edit?id='+
b.reportRequestId+'" data-value="'+b.reportRequestId+'">'+$.i18n._("edit")+'</a></li>                                 <li role="presentation"><a class="work-flow-edit" role="menuitem" href="copy?id='+b.reportRequestId+'">'+$.i18n._("copy")+'</a></li>                                 <li role="presentation"><a class="work-flow-edit" role="menuitem" href="#" data-toggle="modal"                                     data-target="#deleteModal" data-instancetype="'+$.i18n._("reportRequest")+'" data-instanceid="'+
b.reportRequestId+'" data-instancename="'+replaceBracketsAndQuotes(b.requestName)+'">'+$.i18n._("delete")+"</a></li>                             </ul>                         </div>"}}]});k();return g}}}();