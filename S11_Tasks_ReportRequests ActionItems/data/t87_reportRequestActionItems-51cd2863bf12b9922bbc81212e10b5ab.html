//# sourceMappingURL=reportRequestActionItems.js.map
var reportRequest=reportRequest||{};
reportRequest.reportRequestActionItems=function(){var l=function(b){if("undefined"==typeof taskCounter||""==taskCounter)taskCounter=0;var c=$("<div>");c.attr("class","panelDiv");c.attr("data-id",taskCounter);var d=$("<div>");d.attr("class","panel panel-default");var a=$("<div>"),h=$("<input type='hidden'>");h.attr("class","aiDate");h.val(b.dueDateTask);var e=$("<input type='hidden'>");e.attr("class","aiDateSign");e.val(b.signDueDateTask);var f=b.assignedToLabel,l=$("<strong>");l.attr("class","assignedTo");
l.html("Assigned to:  "+f);f=$("<span>");f.attr("class","text-muted");var m=b.dueDate?moment(b.dueDate).format(DEFAULT_DATE_DISPLAY_FORMAT):"";f.html("  with due date on : <span class='actionItemDueDateAssignedTo'>"+m+"</span>");m=$("<div>");m.attr("style","float: right; cursor: pointer");var k=$("<span>");k.attr("class","glyphicon glyphicon-trash reportRequest");m.append(k);k.on("click",function(){var a=$(this).parents(".panel");a.find(".actionItemDeleted").val(!0);a.closest(".panelDiv").hide()});
k=$("<div>");k.attr("style","float:right; cursor:pointer");var g=$("<span>");g.attr("class","glyphicon glyphicon-edit reportRequest");k.append(g);g.on("click",function(){var a=$(this).closest(".panelDiv").attr("data-id");actionItem.actionItemModal.edit_action_item(hasAccessOnActionItem,null,!1,REPOERT_REQUEST,a)});g=$("<div>");g.attr("style","float: right");var n=q(b.status),p=$("<span>");p.html("&nbsp");g.append(n);g.append(p);a.append(h);a.append(e);a.append(l);a.append(f);a.append(m);a.append(k);
a.append(g);h=$("<div>");h.attr("style","height: auto; width:80%");r(taskCounter,b,h);d.append(a);d.append(h);c.append(d);$(".reportActionItemDiv").append(c);$(".noActionItem").hide();taskCounter++},q=function(b){var c=$("<span>");c.attr("style",n(b));c.attr("class","statusString");c.html($.i18n._("status_enum."+b));return c},n=function(b){var c="";b==STATUS_ENUM.OPEN?c="color:blue":b==STATUS_ENUM.IN_PROGRESS||b==STATUS_ENUM.NEED_CLARIFICATION?c="color:orange":b==STATUS_ENUM.CLOSED&&(c="color:green");
return c},r=function(b,c,d){var a=e();a.attr("id","actionItems["+b+"].actionCategory");a.attr("name","actionItems["+b+"].actionCategory");a.attr("value",c.actionCategory);d.append(a);a=e();a.attr("id","actionItems["+b+"].assignedTo");a.attr("name","actionItems["+b+"].assignedTo");a.attr("value",c.assignedTo);d.append(a);a=e();a.attr("id","actionItems["+b+"].dueDate");a.attr("name","actionItems["+b+"].dueDateObj");a.attr("value",c.dueDate?moment(c.dueDate).format(DEFAULT_DATE_DISPLAY_FORMAT):"");d.append(a);
a=e();a.attr("id","actionItems["+b+"].completionDate");a.attr("name","actionItems["+b+"].completionDateObj");a.attr("value",c.completionDate?moment(c.completionDate).format(DEFAULT_DATE_DISPLAY_FORMAT):"");d.append(a);a=e();a.attr("id","actionItems["+b+"].dateCreated");a.attr("name","actionItems["+b+"].dateCreatedObj");a.attr("value",moment(new Date).tz(userTimeZone).format(DATEPICKER_FORMAT_AM_PM));d.append(a);a=e();a.attr("id","actionItems["+b+"].priority");a.attr("name","actionItems["+b+"].priority");
a.attr("value",c.priority);d.append(a);a=e();a.attr("id","actionItems["+b+"].status");a.attr("name","actionItems["+b+"].status");a.attr("value",c.status);d.append(a);a=e();a.attr("id","actionItems["+b+"].appType");a.attr("name","actionItems["+b+"].appType");a.attr("value","REPORT_REQUEST");d.append(a);a=e();a.attr("id","actionItems["+b+"].deleted");a.attr("name","actionItems["+b+"].deleted");a.attr("class","reportRequest actionItemDeleted");a.attr("value",!1);d.append(a);a=e();a.attr("id","actionItems["+
b+"].id");a.attr("name","actionItems["+b+"].id");a.attr("value",null);d.append(a);a=e();a.attr("id","actionItems["+b+"].newObj");a.attr("name","actionItems["+b+"].newObj");a.attr("value",!0);d.append(a);a=e();a.attr("id","actionItems["+b+"].description");a.attr("name","actionItems["+b+"].description");a.attr("value",c.description);d.append(a);c=pvr.common_util.preserve_line_break(c.description);a=$("<span>");a.attr("id","actionItems["+b+"].display");a.attr("class","reportRequest");a.attr("style",
"word-wrap: break-word");a.html(c);d.append(a)},f=function(b,c){return"actionItems["+b+"]."+c},e=function(){var b=$("<input>");b.attr("class","reportRequest");b.attr("type","hidden");return b};return{add_action_item:l,modifyAddedActionItem:function(b,c){$(".reportActionItemDiv").find(".panelDiv[data-id="+b+"]").find(".reportRequest").each(function(){var a=$(this),d=a.attr("id");"undefined"!=typeof d&&null!=d&&(d==f(b,"actionCategory")&&a.val(c.find("#actionCategory").val()),d==f(b,"assignedTo")&&
a.val(c.find("#assignedTo").val()),d==f(b,"dueDate")&&a.val(c.find("#dueDate").val()),d==f(b,"completionDate")&&a.val(c.find("#completionDate").val()),d==f(b,"priority")&&a.val(c.find("#priority").val()),d==f(b,"status")&&a.val(c.find("#status").val()),d==f(b,"description")&&a.val(c.find("#description").val()),d==f(b,"display")&&a.html(c.find("#description").val()))});$(".reportActionItemDiv").find(".panelDiv[data-id="+b+"]").find(".text-muted").html("  with due date on : "+c.find("#dueDate").val());
var d=$(".reportActionItemDiv").find(".panelDiv[data-id="+b+"]").find(".statusString");d.attr("style",n(c.find("#status").val()));d.html(c.find("#status").val());d=c.find("#assignedTo").select2("data").text;$(".reportActionItemDiv").find(".panelDiv[data-id="+b+"]").find(".assignedTo").html("Assigned to: "+d)},add_action_item_to_request:function(b){b={assignedToLabel:b.find("#assignedTo").select2("data").text,assignedTo:b.find("#assignedTo").val(),dueDate:b.find("#dueDate").val(),status:b.find("#status").val(),
actionCategory:b.find("#actionCategory").val(),completionDate:b.find("#completionDate").val(),priority:b.find("#priority").val(),description:b.find("#description").val()};b.description=encodeToHTML(b.description);l(b)},add_action_item_from_task:function(b){var c=b.dueDate,d=b.dueDateSign,a=$("#dueDate").val(),e="";"undefined"!=typeof a&&null!=a&&""!=a&&(a=moment.tz(a,DEFAULT_DATE_DISPLAY_FORMAT,userTimeZone),"+"==d?a.add(parseInt(c),"days"):"-"==d&&a.subtract(parseInt(c),"days"),e=a.format(DEFAULT_DATE_DISPLAY_FORMAT));
b={assignedToLabel:$("#assignedTo").select2("data").text,assignedTo:$("#assignedTo").val(),dueDate:e,status:$("#status").val(),actionCategory:ACTION_ITEM_CATEGORY_ENUM.REPORT_REQUEST,completionDate:"",priority:b.priority,description:b.taskName,dueDateTask:b.dueDate,signDueDateTask:b.dueDateSign};l(b)}}}();