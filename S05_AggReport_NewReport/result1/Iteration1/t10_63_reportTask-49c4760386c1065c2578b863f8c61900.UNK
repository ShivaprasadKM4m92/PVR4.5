//# sourceMappingURL=reportTask.js.map
$(document).ready(function(){function f(a,b,g,c,e){var d=$("#taskTable").find("tr.hide").clone(!0).removeClass("hide table-line");$("#taskTable").append(d);a&&d.find("textarea").val(a);b&&d.find("select[name=aiPriority]").val(b);g&&d.find("select[name=aiAssignedTo]").val(g);$.isNumeric(c)?(a=parseInt(c),0>=a&&(b=d.find("select[name=aiBeforeAfter]"),b.val("BEFORE"),a=-a,b.attr("min",0)),d.find("input[name=aiDueDateShift]").val(a)):d.find("input[name=aiDueDateShift]").val("1");null!==e&&(e=-parseInt(e),
d.find("input[name=aiCreateDateShift]").val(e));d.find("select[name=aiActionCategory]").select2();d.find("select[name=aiPriority]").select2();d.find("select[name=aiAssignedTo]").select2();d.find("select[name=aiBeforeAfter]").select2()}var c=$("#tasks").val();if(c)for(var c=JSON.parse(c),e=0;e<c.length;e++)f(c[e].description,c[e].priority,c[e].assignedToId,c[e].dueDateShift,c[e].createDateShift);aggregateReportViewTaskMode&&($(".taskTemplateField").prop("disabled","disabled"),$("#taskTable .glyphicon ").hide(),
$("#taskTable .select2-arrow ").hide(),$(".taskTemplateField").css("border","0"),$(".taskTemplateField").css("background","#ffffff"));$(document).on("click",".addTaskTable",function(){f()});$(document).on("click",".removeTaskTable",function(){$(this).parents("tr").detach()});$(document).on("change","select[name=aiBeforeAfter]",function(){$createInput=$(this).parent().parent().find("input[name=aiCreateDateShift]");$dueInput=$(this).parent().parent().find("input[name=aiDueDateShift]");"BEFORE"===$(this).val()?
($dueInput.attr("min",0),$createInput.attr("min",1),$createInput.prop("readonly",!1),$dueInput.trigger("change")):($dueInput.attr("min",1),$createInput.attr("min",0),$createInput.val(""),$createInput.prop("readonly",!0))});$(document).on("blur change",".table > input",function(){var a,b;"BEFORE"===$(this).parent().parent().find("select[name=aiBeforeAfter]").val()&&("aiDueDateShift"===$(this).attr("name")?(a=$(this),b=a.parent().parent().find("input[name=aiCreateDateShift]"),0<=a.val()?(b.prop("readonly",
!1),(""===b.val()||parseInt(b.val())<=parseInt(a.val()))&&b.val(parseInt(a.val())+1)):(b.prop("readonly",!0),b.val(""))):(b=$(this),a=b.parent().parent().find("input[name=aiDueDateShift]"),(""===b.val()||parseInt(b.val())<=parseInt(a.val()))&&b.val(parseInt(a.val())+1)))});$(document).on("click",".task-template-add",function(){var a=$(this).attr("data-id");$.ajax({url:getTaskForTemplateUrl+"?id="+a,type:"get",success:function(b){b=b.data;for(var a=0;a<b.length;a++)f(b[a].description,b[a].priority,
b[a].assignedToId,b[a].dueDateShift,b[a].createDateShift);$("#taskTemplateList").modal("hide")},error:function(a){alert((a.responseJSON.message?a.responseJSON.message:"")+(a.responseJSON.stackTrace?"\n"+a.responseJSON.stackTrace:""))}})});$(document).on("click",".task-template-show",function(){$.ajax({url:listTaskTemplateUrl,type:"get",error:function(a){alert((a.responseJSON.message?a.responseJSON.message:"")+(a.responseJSON.stackTrace?"\n"+a.responseJSON.stackTrace:""))},success:function(a){a=a.data;
for(var b="",c=0;c<a.length;c++)b+="<div><a class='task-template-add' data-id='"+a[c].id+'\' href="javascript:void(0)">'+encodeToHTML(a[c].name)+"</a></div><br>";$("#taskTemplateListContent").html(b);$("#taskTemplateList").modal("show")}})})});