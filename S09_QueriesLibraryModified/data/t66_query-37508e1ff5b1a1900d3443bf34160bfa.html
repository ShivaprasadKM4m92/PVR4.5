//# sourceMappingURL=query.js.map
$(document).ready(function(){var e={},f=!1;(function(){var d=$("#rxTableQueries").DataTable({sPaginationType:"bootstrap",stateSave:!0,stateDuration:-1,language:{url:"../assets/i18n/dataTables_"+userLocale+".json"},processing:!0,serverSide:!0,ajax:{url:listQueriesUrl,dataSrc:"data",data:function(a){a.searchString=a.search.value;a.advancedFilter=f;a.tableFilter=JSON.stringify(e);0<a.order.length&&(a.direction=a.order[0].dir,a.sharedwith=$("#sharedWithFilterControl").val(),a.sort=a.columns[a.order[0].column].data)}},
aaSorting:[],order:[[0,"desc"]],columnDefs:[{width:"2%",targets:0},{width:"8%",targets:1},{width:"10%",targets:2},{width:"13%",targets:3},{width:"8%",targets:4},{width:"6%",targets:5},{width:"10%",targets:6},{width:"10%",targets:7},{width:"10%",targets:8},{width:"10%",targets:9},{width:"8%",targets:10},{width:"5%",targets:11}],bLengthChange:!0,iDisplayLength:50,aLengthMenu:[[50,100,200,500],[50,100,200,500]],autoWidth:!1,columnDefs:[{width:"8%",targets:0},{width:"10%",targets:1},{width:"13%",targets:2},
{width:"8%",targets:3},{width:"6%",targets:4},{width:"10%",targets:5},{width:"10%",targets:6},{width:"10%",targets:7},{width:"10%",targets:8},{width:"9%",targets:9},{width:"6%",targets:10}],aoColumns:[{data:"isFavorite",sClass:"dataTableColumnCenter",asSorting:["asc"],render:renderFavoriteIcon},{mData:"type",bSortable:!1},{mData:"name",mRender:function(a,c,b){return encodeToHTML(a)}},{mData:"description",mRender:function(a,c,b){return'<div class="comment">'+(null==a?"":encodeToHTML(a))+"</div>"}},
{mData:"qualityChecked",sClass:"dataTableColumnCenter",mRender:function(a,c,b){return 1==a?$.i18n._("yes"):""}},{mData:"checkUsage",aTargets:["checkUsage"],bSortable:!1,sClass:"dataTableColumnCenter"},{mData:"owner.fullName"},{mData:"dateCreated",aTargets:["dateCreated"],sClass:"dataTableColumnCenter forceLineWrapDate",mRender:function(a,c,b){return moment.utc(a).tz(userTimeZone).format(DEFAULT_DATE_TIME_DISPLAY_FORMAT)}},{mData:"lastUpdated",aTargets:["lastUpdated"],sClass:"dataTableColumnCenter forceLineWrapDate",
mRender:function(a,c,b){return moment.utc(a).tz(userTimeZone).format(DEFAULT_DATE_TIME_DISPLAY_FORMAT)}},{mData:"lastExecuted",aTargets:["lastExecuted"],sClass:"dataTableColumnCenter forceLineWrapDate",mRender:function(a,c,b){return null!=a?moment.utc(a).tz(userTimeZone).format(DEFAULT_DATE_TIME_DISPLAY_FORMAT):""}},{mData:"tags",bSortable:!1,aTargets:["tags"],mRender:function(a,c,b){return a?encodeToHTML(a):""}},{mData:null,sClass:"dt-center",bSortable:!1,aTargets:["id"],mRender:function(a,c,b){return'<div class="btn-group dropdown dataTableHideCellContent" align="center">                             <a class="btn btn-success btn-xs" href="'+
runUrl+"/?selectedQuery="+a.id+'">'+$.i18n._("run")+'</a>                             <button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown">                                 <span class="caret"></span>                                 <span class="sr-only">Toggle Dropdown</span>                             </button>                             <ul class="dropdown-menu dropdown-menu-right" role="menu" style="min-width: 80px !important; font-size: 12px;">                                 <li role="presentation"><a role="menuitem" href="'+
queryViewUrl+"/"+a.id+'">'+$.i18n._("view")+'</a></li>                                 <li role="presentation"><a role="menuitem" href="'+queryEditUrl+"/"+a.id+'">'+$.i18n._("edit")+'</a></li>                                 <li role="presentation"><a role="menuitem" href="'+queryPreviewUrl+"?selectedQuery="+a.id+'">'+$.i18n._("Preview")+'</a></li>                                 <li role="presentation"><a role="menuitem" href="'+queryCopyUrl+"/"+a.id+'">'+$.i18n._("copy")+'</a></li>                                 <li role="presentation"><a role="menuitem" href="#" data-toggle="modal"                                         data-target="#deleteModal" data-instancetype="'+
$.i18n._("query")+'" data-instanceid="'+a.id+'" data-instancename="'+replaceBracketsAndQuotes(a.name)+'">'+$.i18n._("delete")+"</a></li>                             </ul>                         </div>"}}],fnInitComplete:function(){initSharedWithFilter("rxTableQueries",d);$("#rxTableQueries").on("click",".favorite",function(){changeFavoriteState($(this).data("exconfig-id"),$(this).hasClass("glyphicon-star-empty"),$(this))})}}).on("draw.dt",function(){setTimeout(function(){$(".dropdown-toggle").click(function(){setTimeout(function(){var a=
$(".dataTables_scrollBody")[0];a.scrollHeight>a.clientHeight&&$(a).find("table tr:last").after('<tr class="temprow"><td style="height:'+(a.scrollHeight-a.clientHeight)+'px; border-top:none " colspan="12">&nbsp;</td></tr>')},200)});$(".dropdown").on("hide.bs.dropdown",function(){$(".temprow").remove()})},100);$(".comment").shorten({showChars:70})}).on("xhr.dt",function(a,c,b,d){checkIfSessionTimeOutThenReload(a,b)});actionButton("#rxTableQueries");loadTableOption("#rxTableQueries")})();(function(){var d=
[{label:$.i18n._("app.advancedFilter.type"),type:"select2-enum",name:"queryType",data_type:"QueryTypeEnum",data:queryTypes},{label:$.i18n._("app.advancedFilter.queryName"),type:"text",name:"name"},{label:$.i18n._("app.advancedFilter.description"),type:"text",name:"description"},{label:$.i18n._("app.advancedFilter.tag"),type:"select2-multi-id",name:"tag",ajax:{url:"/reports/tag",data_handler:function(a){return pvr.filter_util.build_options(a,"id","name",!1)},error_handler:function(a){console.log(a)}}},
{label:$.i18n._("app.advancedFilter.qualityChecked"),type:"boolean",name:"qualityChecked"},{label:$.i18n._("app.advancedFilter.dateCreatedStart"),type:"date-range",group:"dateCreated",group_order:1},{label:$.i18n._("app.advancedFilter.dateCreatedEnd"),type:"date-range",group:"dateCreated",group_order:2},{label:$.i18n._("app.advancedFilter.dateModifiedStart"),type:"date-range",group:"lastUpdated",group_order:1},{label:$.i18n._("app.advancedFilter.dateModifiedEnd"),type:"date-range",group:"lastUpdated",
group_order:2},{label:$.i18n._("app.advancedFilter.dateLastExecutedStart"),type:"date-range",group:"lastExecuted",group_order:1},{label:$.i18n._("app.advancedFilter.dateLastExecutedEnd"),type:"date-range",group:"lastExecuted",group_order:2},{label:$.i18n._("app.advancedFilter.owner"),type:"id",name:"owner"}];pvr.filter_util.construct_right_filter_panel({table_id:"#rxTableQueries",container_id:"config-filter-panel",filter_defs:d,column_count:1,done_func:function(a){e=a;f=!0;$("#rxTableQueries").DataTable().ajax.reload(function(a){},
!1).draw()}});bindSelect2WithUrl($("input[data-name=owner]"),ownerListUrl,ownerValuesUrl,!0)})()});