//# sourceMappingURL=report.js.map
REPORT_STATUS_ENUM={NEW:"NEW",NON_REVIEWED:"NON_REVIEWED",REVIEWED:"REVIEWED"};ACTION_ITEM_GROUP_STATE_ENUM={WAITING:"WAITING",OVERDUE:"OVERDUE",CLOSED:"CLOSED"};
$(document).ready(function(){var e={},d=!1,f=$("#rxTableReports").DataTable({sPaginationType:"bootstrap",stateSave:!0,stateDuration:-1,language:{url:"../assets/i18n/dataTables_"+userLocale+".json"},fnInitComplete:function(){var a=$("#sharedWithFilterControl"),c=$('<div class="col-xs-10 row" style="padding-top: 0"></div>'),b=$("#sharedWithFilter"),d=$("#archivedFilter"),e=$("#rxTableReports_filter").parent(),g=$("select[name=rxTableReports_length]");g.css("width","50px");g.css("padding","0");b.removeClass("dataTables_filter");
b.removeClass("col-xs-7");b.addClass("col-xs-2");b.find("label").remove();bindShareWith(a,sharedWithFilterListUrl,sharedWithFilterValuesUrl,"100%").on("change",function(a){sessionStorage.setItem(sessionStorageSharedWithVariableName,$("#sharedWithFilterControl").val());f.draw()});b.css("margin-top","-4px");d.addClass("col-xs-2");initArchiveFilter(f);c.append("<div class='col-xs-6'></div>");c.append(d);c.append(b);e.find("input").attr("placeholder",$.i18n._("app.generatedAdhocReports.search.label"));
a=e.find("input");a.css("width","100%");c.append(a);a.wrap("<div class='col-xs-2'></div>");e.before(c);e.remove();getReloader($("#rxTableReports_length"),$("#rxTableReports"));$("#rxTableReports").on("click",".createActionItem",function(){actionItem.actionItemModal.set_executed_report_id($(this).data("exconfig-id"));actionItem.actionItemModal.init_action_item_modal(!1,ADHOC_REPORT)});$("#rxTableReports").on("click ",".actionItemModalIcon",function(){actionItem.actionItemModal.set_executed_report_id($(this).data("exconfig-id"));
actionItem.actionItemModal.view_action_item_list(hasAccessOnActionItem,!1,ADHOC_REPORT)});$("#rxTableReports").on("click",".favorite",function(){changeFavoriteState($(this).data("exconfig-id"),$(this).hasClass("glyphicon-star-empty"),$(this))})},processing:!0,serverSide:!0,ajax:{url:indexReportUrl,dataSrc:"data",data:function(a){a.tableFilter=JSON.stringify(e);a.advancedFilter=d;a.searchString=a.search.value;a.sharedwith=$("#sharedWithFilterControl").val();a.includeArchived=$("#includeArchived").is(":checked");
0<a.order.length&&(a.direction=a.order[0].dir,a.sort=a.columns[a.order[0].column].data);0<$('input[name="relatedReports"]').size()&&(a.status=$('input[name="relatedReports"]:checked').val())}},aaSorting:[],order:[[0,"asc"]],bLengthChange:!0,columnDefs:[{width:"25",targets:0},{width:65,targets:9},{width:100,targets:10}],aoColumns:[{data:"isFavorite",sClass:"dataTableColumnCenter",asSorting:["asc"],render:renderFavoriteIcon},{mData:"reportName",aTargets:["reportName"],mRender:function(a,c,b){c=b.isArchived?
'<span class="glyphicon glyphicon-text-background" title="'+$.i18n._("labelArchive")+'"></span> ':"";b=showReportUrl+"/"+b.id;a=encodeToHTML(a);return c+"<a href="+b+">"+a+"</a>"}},{mData:"description",mRender:function(a,c,b){return null==a?a:encodeToHTML(a)}},{mData:"numOfExecutions",aTargets:["numOfExecutions"],sClass:"dataTableColumnCenter"},{mData:"owner"},{mData:"dateCreated",aTargets:["dateCreated"],sClass:"dataTableColumnCenter forceLineWrapDate",mRender:function(a,c,b){Date.parse(a);return moment.utc(a).tz(userTimeZone).format(DEFAULT_DATE_TIME_DISPLAY_FORMAT)}},
{mData:"tags",bSortable:!1,aTargets:["tags"],mRender:function(a,c,b){return a?encodeToHTML(a):""}},{mData:"state",bSortable:!1,mRender:function(a,c,b){return'<button class="btn btn-default btn-xs" style="min-width: 100px" data-executed-config-id= "'+b.id+'" data-initial-state= "'+b.state+'" onclick="openStateHistoryModal(this)">'+b.state+"</button>"}},{mData:"dateCreated",aTargets:["dateCreated"],bVisible:!1,mRender:function(a,c,b){return moment.utc(a).tz(userTimeZone).format("L")}},{data:null,sClass:"dataTableColumnCenter",
render:function(a,c,b){a=null;if(b.actionItemStatus){switch(b.actionItemStatus){case ACTION_ITEM_GROUP_STATE_ENUM.OVERDUE:a="btn btn-danger btn-xs";break;case ACTION_ITEM_GROUP_STATE_ENUM.WAITING:a="btn btn-warning btn-xs";break;default:a="btn btn-success btn-xs"}a='<button class="'+a+' actionItemModalIcon" data-exconfig-id="'+b.id+'" style="width:65px;">'+$.i18n._("app.actionItemGroupState."+b.actionItemStatus)+"</button>"}return a}},{mData:null,bSortable:!1,sClass:"dataTableColumnCenter",aTargets:["id"],
mRender:function(a,c,b){c='<div class="btn-group dropdown dataTableHideCellContent" align="center">                     <a class="btn btn-success btn-xs" href="'+showReportUrl+"/"+a.id+'">'+$.i18n._("view")+'</a>                             <button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown">                             <span class="caret"></span>                             <span class="sr-only">Toggle Dropdown</span>                             </button>                             <ul class="dropdown-menu dropdown-menu-right" role="menu" style="min-width: 80px !important; font-size: 12px;">                                 <li role="presentation"><a role="menuitem" href="" id="'+
b.id+'" data-toggle="modal" data-target="#sharedWithModal">'+$.i18n._("labelShare")+'</a></li>                                 <li role="presentation"><a role="menuitem" href="" id="'+b.id+'" data-toggle="modal" data-target="#emailToModal">'+$.i18n._("labelEmailTo")+"</a></li> ";hasDmsIntegration&&(c=c+'<li role="presentation" class="stateSpecificActions"><a href="#" class="sendToDms" role="menuitem" data-id="'+b.id+'" data-toggle="modal" data-target="#sendToDmsModal">'+$.i18n._("labelSendToDms")+
"</a></li>");hasAccessOnActionItem&&(c=c+'<li role="presentation" class="stateSpecificActions"><a href="#" role="menuitem" class="listMenuOptions createActionItem" data-exconfig-id="'+b.id+'">'+$.i18n._("workFlowState.reportActionType.CREATE_ACTION_ITEM")+"</a></li>");return c+=' <li role="presentation"><a role="menuitem" href="'+LINKS.toWord+"&id="+b.id+'">'+$.i18n._("labelExportTo","Word")+'</a></li>                                 <li role="presentation"><a role="menuitem" href="'+LINKS.toExcel+
"&id="+b.id+'">'+$.i18n._("labelExportTo","Excel")+'</a></li>                                 <li role="presentation"><a role="menuitem" href="'+LINKS.toPDF+"&id="+b.id+'">'+$.i18n._("labelExportTo","PDF")+'</a></li>                                 <li role="presentation"><a role="menuitem" href="'+LINKS.toPowerPoint+"&id="+b.id+'">'+$.i18n._("labelExportTo","PowerPoint")+'</a></li>                                 <li role="presentation"><a role="menuitem" href="#" onclick="confirmArchive('+!b.isArchived+
",'"+LINKS.toArchive+"?id="+b.id+"')\" >"+(b.isArchived?$.i18n._("labelUnArchive"):$.i18n._("labelArchive"))+'</a></li>                                 <li role="presentation"><a role="menuitem" href="#" data-toggle="modal"                                         data-target="#deleteModal" data-deleteforallallowed="true" data-instancetype="'+$.i18n._("configuration")+'" data-instanceid="'+b.id+'" data-instancename="'+replaceBracketsAndQuotes(a.reportName)+'">'+$.i18n._("labelDelete")+"</a></li>                                 </ul>                         </div>"}}]}).on("xhr.dt",
function(a,c,b,d){checkIfSessionTimeOutThenReload(a,b)});actionButton("#rxTableReports");loadTableOption("#rxTableReports");$(".outside").hide();(function(){var a=[{label:$.i18n._("app.advancedFilter.reportName"),type:"text",name:"reportName"},{label:$.i18n._("app.advancedFilter.description"),type:"text",name:"description"},{label:$.i18n._("app.advancedFilter.version"),type:"number",name:"numOfExecutions"},{label:$.i18n._("app.advancedFilter.tag"),type:"select2-multi-id",name:"tag",ajax:{url:"/reports/tag",
data_handler:function(a){return pvr.filter_util.build_options(a,"id","name",!1)},error_handler:function(a){console.log(a)}}},{label:$.i18n._("app.advancedFilter.dateGeneratedStart"),type:"date-range",group:"dateCreated",group_order:1},{label:$.i18n._("app.advancedFilter.dateGeneratedEnd"),type:"date-range",group:"dateCreated",group_order:2},{label:$.i18n._("app.advancedFilter.owner"),type:"id",name:"owner"},{label:$.i18n._("app.advancedFilter.state"),type:"select2-id",name:"workflowState",ajax:{url:"/reports/workflowState/list",
data_handler:function(a){return pvr.filter_util.build_options(a,"workflowStateId","name",!0)},error_handler:function(a){console.log(a)}}}];pvr.filter_util.construct_right_filter_panel({table_id:"#rxTableReports",container_id:"config-filter-panel",filter_defs:a,column_count:1,done_func:function(a){e=a;d=!0;$("#rxTableReports").DataTable().ajax.reload(function(a){},!1).draw()}});bindSelect2WithUrl($("input[data-name=owner]"),ownerListUrl,ownerValuesUrl,!0)})()});
function confirmArchive(e,d){var f=$("#confirmationModal");f.modal("show");f.find(".modalHeader").html($.i18n._("app.archive.confirmation.title"));f.find(".okButton").html($.i18n._("yes"));e?f.find(".confirmationMessage").html($.i18n._("app.archive.confirmation.toArchive")):f.find(".confirmationMessage").html($.i18n._("app.archive.confirmation.fromArchive"));f.find(".okButton").unbind().click(function(){document.location.href=d})}
function getRadios(e){var d;d='<div class="col-xs-5 radioButtonGroup"><label class="no-bold add-cursor"><input value="new" id="indexRadio" type="radio" name="relatedReports" onchange="checkStatus(this)" checked/> '+$.i18n._("labelNew")+"</label>";d=d+'<label class="no-bold add-cursor radioAll"><input value="archived" id="archivedRadio" type="radio" name="relatedReports" onchange="checkStatus(this)"/> '+$.i18n._("labelReviewed")+"</label>";d=d+'<label class="no-bold add-cursor radioAll"><input value="underReview" id="listAllRadio" type="radio" name="relatedReports" onchange="checkStatus(this)"/> '+
$.i18n._("labelNonReviewed")+"</label>";d=$(d);$(e).append(d)}function updateStatus(e,d){$.ajax({type:"GET",url:updateStatusUrl,data:{id:d,reportStatus:e},success:function(d){console.log("Load was performed.")}})}function checkStatus(e){$("#rxTableReports").DataTable().order([[4,"desc"]]).draw()};